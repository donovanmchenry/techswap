<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle || 'TechSwap' %></title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <%- include('partials/navbar') %>

    <main>
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">Find Your Next Device</h1>
                    <p class="hero-subtitle">Student-to-student marketplace for buying and selling tech</p>
                    <div class="hero-search">
                        <form action="/shop" method="GET">
                            <input type="text" name="search" placeholder="Search for laptops, phones, tablets..." class="hero-search-input">
                            <button type="submit" class="btn btn-primary btn-lg">Search</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <section class="categories">
            <div class="container">
                <h2 class="section-title">Browse by Category</h2>
                <div class="category-grid">
                    <% categories.forEach(category => { %>
                        <a href="/shop?category=<%= category %>" class="category-card">
                            <div class="category-icon">
                                <% if (category === 'Laptops') { %>üíª
                                <% } else if (category === 'Phones') { %>üì±
                                <% } else if (category === 'Tablets') { %>üìü
                                <% } else if (category === 'Audio') { %>üéß
                                <% } else if (category === 'Gaming') { %>üéÆ<% } %>
                            </div>
                            <h3><%= category %></h3>
                        </a>
                    <% }); %>
                </div>
            </div>
        </section>

        <section class="featured-products">
            <div class="container">
                <h2 class="section-title">Featured Products</h2>
                <div class="product-grid">
                    <% products.forEach(product => { %>
                        <div class="product-card">
                            <a href="/product/<%= product.id %>">
                                <div class="product-image">
                                    <img src="<%= product.image_url %>" alt="<%= product.title %>" onerror="this.src='/images/placeholder.jpg'">
                                    <span class="product-condition condition-<%= product.condition %>"><%= product.condition %></span>
                                </div>
                                <div class="product-info">
                                    <h3 class="product-title"><%= product.title %></h3>
                                    <p class="product-campus">üìç <%= product.campus %></p>
                                    <div class="product-footer">
                                        <span class="product-price">$<%= product.price.toFixed(2) %></span>
                                        <button class="btn btn-sm btn-primary" onclick="addToCart(<%= product.id %>, event)">Add to Cart</button>
                                    </div>
                                </div>
                            </a>
                        </div>
                    <% }); %>
                </div>
                <div class="text-center" style="margin-top: 2rem;">
                    <a href="/shop" class="btn btn-primary btn-lg">View All Products</a>
                </div>
            </div>
        </section>

        <section class="how-it-works">
            <div class="container">
                <h2 class="section-title">How It Works</h2>
                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <h3>Browse Products</h3>
                        <p>Find tech from verified students at your campus</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <h3>Secure Checkout</h3>
                        <p>Pay safely with our secure payment system</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <h3>Get Your Tech</h3>
                        <p>Choose campus pickup or shipping</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="cta-section">
            <div class="container">
                <div class="cta-content">
                    <h2>Ready to find your next device?</h2>
                    <p>Join thousands of students buying and selling tech</p>
                    <div class="cta-buttons">
                        <a href="/shop" class="btn btn-primary btn-lg">Start Shopping</a>
                        <% if (!user) { %>
                            <a href="/register" class="btn btn-outline btn-lg">Sign Up Free</a>
                        <% } %>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <%- include('partials/footer') %>

    <script src="/js/main.js"></script>
</body>
</html>
